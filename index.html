<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FarmWise Naija</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"> <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        #weather-map-container {
            position: relative;
            padding-bottom: 56.25%; /* 16:9 aspect ratio */
            height: 0;
            overflow: hidden;
            max-width: 100%;
            background: #eee;
        }
        #weather-map-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body class="bg-green-100 text-gray-800">

    <div class="container mx-auto p-4 sm:p-6 md:p-8">
        <header class="text-center mb-8">
            <h1 class="text-4xl font-bold text-green-800">Farm Wise Dashboard </h1>
            <h1 class="text-green-600 text-sm">West Africa (beta) version</h1>
            <p class="text-lg text-green-800 mt-2">From  &#8358;igeria to Global Markets</p>
            <marquee><p class="text-sm text-green-600 mt-1" id="current-date"></p></marquee>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            
            <div class="lg:col-span-2 space-y-8">

                <section id="rainy-season" class="bg-white p-6 rounded-lg shadow-md">
                    <h2 class="text-2xl font-semibold text-gray-700 border-b-2 border-green-200 pb-2 mb-4">Seasonal Forecast (Southwest Nigeria)</h2>
                    <div id="forecast-content" class="text-lg"></div>
                    <p class="text-sm text-gray-500 mt-4">General Pattern: The primary rainy season typically runs from March to November, with a drier "August Break".</p>
                </section>

                <section id="crop-info">
                    <h2 class="text-2xl font-semibold text-gray-700 text-center mb-6">Crop Cultivation Guide</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6" id="crop-cards-container">
                        </div>
                </section>

                <section id="value-added-prices" class="bg-white p-6 rounded-lg shadow-md">
                    <h2 class="text-2xl font-semibold text-gray-700 border-b-2 border-green-200 pb-2 mb-4">
                        <i class="fas fa-industry mr-2 text-orange-500"></i>Value-Added Product Prices
                        <h2 class="text-sm text-orange-600 block md:hidden">*kindly scroll to the right for full price details</h2>
                    </h2>
                    <div class="overflow-x-auto">
                        <table class="w-full text-left">
                            <thead>
                                <tr class="bg-orange-600 text-white">
                                    <th class="p-3">Product</th>
                                    <th class="p-3">Source Crop</th>
                                    <th class="p-3">Price</th>
                                    <th class="p-3">Unit</th>
                                </tr>
                            </thead>
                            <tbody id="value-added-table-body">
                                </tbody>
                        </table>
                    </div>
                </section>
                
                <section id="shipping-prices" class="bg-white p-6 rounded-lg shadow-md">
                    <h2 class="text-2xl font-semibold text-gray-700 border-b-2 border-green-200 pb-2 mb-4">
                        <i class="fas fa-ship mr-2 text-blue-500"></i>International Shipping Estimates
                        <h2 class="text-sm text-blue-600 block md:hidden">*kindly scroll to the right for full cost details</h2>
                    </h2>
                    <p class="text-gray-600 mb-4">Estimated costs for shipping a 20ft container from Lagos (Apapa Port), Nigeria.</p>
                    <div class="overflow-x-auto">
                        <table class="w-full text-left">
                            <thead>
                                <tr class="bg-blue-600 text-white">
                                    <th class="p-3">Destination Port</th>
                                    <th class="p-3">Region</th>
                                    <th class="p-3">Estimated Cost (USD)</th>
                                    <th class="p-3">Transit Time</th>
                                </tr>
                            </thead>
                            <tbody id="shipping-table-body">
                                </tbody>
                        </table>
                    </div>
                     <p class="text-xs text-gray-500 mt-3">*Prices are estimates and subject to change based on carrier, season, and fuel surcharges.</p>
                </section>

            </div>

            <div class="lg:col-span-1 space-y-8">
                <section id="market-prices">
                    <h2 class="text-2xl font-semibold text-gray-700 mb-4 text-center">Market Price Watch</h2>
                    <div class="bg-white p-6 rounded-lg shadow-md mb-6">
                        <h3 class="font-bold text-lg mb-3 text-center text-green-700">Local Farm Produce Prices</h3>
                        <table class="w-full text-left">
                            <thead>
                                <tr class="bg-green-600 text-white">
                                    <th class="p-3">Produce</th>
                                    <th class="p-3">Price/100kg</th>
                                    <th class="p-3">Trend</th>
                                </tr>
                            </thead>
                            <tbody id="prices-table-body"></tbody>
                        </table>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="font-bold text-lg mb-3 text-center text-indigo-700">Global Commodity Market</h3>
                        <table class="w-full text-left">
                            <thead>
                                <tr class="bg-indigo-600 text-white">
                                    <th class="p-3">Commodity</th>
                                    <th class="p-3">Price (USD)</th>
                                    <th class="p-3">Unit</th>
                                </tr>
                            </thead>
                            <tbody id="global-prices-table-body"></tbody>
                        </table>
                        <p class="text-xs text-gray-500 mt-3">*Global prices influence local export prices.</p>
                    </div>
                </section>

                <section id="organizations" class="bg-white p-6 rounded-lg shadow-md">
                    <h2 class="text-2xl font-semibold text-gray-700 border-b-2 border-green-200 pb-2 mb-4">
                        <i class="fas fa-sitemap mr-2 text-green-500"></i>Key Export Organizations
                    </h2>
                    <div id="orgs-container" class="space-y-4">
                        </div>
                </section>
                
                 <section id="weather-map" class="bg-white p-6 rounded-lg shadow-md">
                     <h2 class="text-2xl font-semibold text-gray-700 border-b-2 border-green-200 pb-2 mb-4">Live Weather Map</h2>
                     <h2 class="text-sm text-green-600">*Search for Lagos, Ibadan, Abeokuta, or Akure to view current weather conditions. For other locations, please interact with the map manually.</h2>
                     <div class="mb-4">
                         <div class="flex flex-col sm:flex-row gap-2">
                             <input type="text" id="location-search" placeholder="Enter a city (e.g., Lagos)" class="flex-grow p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
                             <button id="search-btn" class="bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors">Search</button>
                         </div>
                     </div>
                     <div id="weather-map-container" class="rounded-lg overflow-hidden border">
                         <iframe id="windy-map" src="https://embed.windy.com/embed2.html?lat=6.5244&lon=3.3792&detailLat=6.5244&detailLon=3.3792&width=650&height=450&zoom=7&level=surface&overlay=rain&product=ecmwf&menu=&message=true&marker=&calendar=now&pressure=&type=map&location=coordinates&detail=&metricWind=km%2Fh&metricTemp=%C2%B0C&radarRange=-1"></iframe>
                     </div>
                </section>
            </div>
        </div>

        <footer class="text-center mt-10 pt-6 border-t border-gray-300">
            <p class="text-gray-600">&copy; 2025 Farm Wise Dashboard. By Stanley Bagambisa; Junior Web Developer, Ogun State, Nigeria.</p>
        </footer>
    </div>

    <script>
      tailwind.config = {
      theme: {
        extend: {
          backgroundImage: {
            'hero-pattern': "url('/images/NigerianFabric.png')",
          }
        }
      }
    }
    
        document.addEventListener('DOMContentLoaded', function() {
            // --- DATA OBJECTS ---
            const cropData = {
                "Cassava": { planting: "Plant cuttings at the start of the rainy season (April-May). Ensures good root establishment before dry spells.", irrigation: "Drought-tolerant once established, but requires water in the first 3 months. Supplemental irrigation during August break boosts yield.", icon: "🌱" },
                "Oil Palm": { planting: "Transplant seedlings during the wet season (May-June) for best results. Requires deep, well-drained soil.", irrigation: "Young palms need consistent moisture. Mature palms are rain-fed but irrigation in dry season increases fruit bunch yield significantly.", icon: "🌴" },
                "Groundnuts": { planting: "Plant between late March and May. Avoid waterlogged soil. Early planting allows for two cycles in a year.", irrigation: "Crucial during flowering and pegging stages. Inconsistent water can lead to empty pods (pops).", icon: "🥜" },
                "Beans (Cowpea)": { planting: "Can be planted early (Mar-Apr) and late (Aug-Sept). It is a hardy crop adaptable to various planting times.", irrigation: "Generally rain-fed. However, watering during flowering can prevent flower drop and increase pod formation.", icon: "🫘" },
                "Kola Nut": { planting: "Grown from seeds or cuttings, best planted during the rainy season. It's a tree crop that requires patience.", irrigation: "Young trees need regular watering. Mature trees are mostly rain-fed but benefit from irrigation in harsh dry seasons.", icon: "🌰" },
                "Tiger Nut": { planting: "Plant tubers from April to June. Thrives in sandy loam soil with good sun exposure.", irrigation: "Requires consistent and abundant water, especially during tuber formation. Drip or furrow irrigation is ideal.", icon: "🌾" }
            };

            const marketPrices = [
                { name: "Cassava", price_per_100kg: "₦45,000 - ₦55,000", trend: "Up" },
                { name: "Palm Fruit", price_per_100kg: "₦60,000 - ₦70,000", trend: "Stable" },
                { name: "Groundnuts", price_per_100kg: "₦140,000 - ₦160,000", trend: "Up" },
                { name: "Beans (Oloyin)", price_per_100kg: "₦150,000 - ₦170,000", trend: "Stable" },
                { name: "Kola Nuts", price_per_100kg: "Varies widely", trend: "Stable" },
                { name: "Tiger Nuts (Dry)", price_per_100kg: "₦200,000 - ₦230,000", trend: "Up" }
            ];
            
            const valueAddedPrices = [
                { product: "Garri (Ijebu)", source: "Cassava", price: "₦35,000 - ₦40,000", unit: "50kg Bag" },
                { product: "Fufu Flour", source: "Cassava", price: "₦1,500 - ₦1,800", unit: "1kg" },
                { product: "Palm Oil", source: "Palm Fruit", price: "₦28,000 - ₦32,000", unit: "25 Litres" },
                { product: "Palm Kernel Oil", source: "Palm Fruit", price: "₦25,000 - ₦28,000", unit: "25 Litres" },
                { product: "Groundnut Oil", source: "Groundnuts", price: "₦40,000 - ₦45,000", unit: "25 Litres" },
                { product: "Kuli-Kuli", source: "Groundnuts", price: "₦1,000 - ₦1,500", unit: "Paint Bucket" },
                { product: "Bean Flour", source: "Beans", price: "₦2,000 - ₦2,500", unit: "1kg" }
            ];

            const globalMarketPrices = [
                { commodity: "Crude Palm Oil", price: "950.00", unit: "per MT (Metric Ton)" },
                { commodity: "Cocoa", price: "9,850", unit: "per MT (ICE London)" },
                { commodity: "Groundnuts (Peanuts)", price: "1,900", unit: "per MT (US Runner)" },
                { commodity: "Corn (Maize)", price: "4.50", unit: "per Bushel (CME)" }
            ];

            const exportOrgs = [
                { name: "Nigerian Export Promotion Council (NEPC)", description: "The primary federal agency responsible for promoting the development and diversification of Nigeria's export trade." },
                { name: "Federation of West African Chambers of Commerce and Industry (FEWACCI)", description: "A regional body that promotes trade, economic cooperation, and regional integration among West African states." },
                { name: "Cocoa Association of Nigeria (CAN)", description: "Advocates for cocoa farmers and exporters, focusing on quality control, market access, and sustainable practices." },
                { name: "Oil Palm Growers Association of Nigeria (OPGAN)", description: "Represents the interests of oil palm farmers, supporting them with inputs, training, and market linkages." }
            ];

            const shippingData = [
                { port: "Antwerp, Belgium", region: "Europe", cost: "$3,800 - $4,500", time: "20-30 Days" },
                { port: "Rotterdam, Netherlands", region: "Europe", cost: "$3,800 - $4,600", time: "20-30 Days" },
                { port: "Houston, USA", region: "North America", cost: "$5,500 - $6,500", time: "30-40 Days" },
                { port: "Guangzhou, China", region: "Asia", cost: "$4,200 - $5,000", time: "40-50 Days" },
                { port: "Jebel Ali, UAE", region: "Middle East", cost: "$3,500 - $4,200", time: "25-35 Days" }
            ];


            // --- DATE & FORECAST ---
            const dateElement = document.getElementById('current-date');
            const forecastElement = document.getElementById('forecast-content');
            const now = new Date();
            const month = now.getMonth();
            dateElement.textContent = `Today is ${now.toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}`;

            let forecastMessage = "";
            if (month >= 2 && month <= 6) { forecastMessage = "Primary rainy season. Crucial time for planting and crop establishment."; } 
            else if (month === 7) { forecastMessage = "'August Break'. Rainfall may be lighter. Monitor crop water needs carefully."; } 
            else if (month >= 8 && month <= 10) { forecastMessage = "Latter rainy season. Good for late-season planting and preparing for harvest."; } 
            else { forecastMessage = "Dry season. Irrigation is essential. Focus on harvesting, land prep, and irrigated crops."; }
            forecastElement.innerHTML = `<p class="bg-blue-100 border-l-4 border-blue-500 text-blue-700 p-4 rounded">${forecastMessage}</p>`;


            // --- WEATHER MAP ---
            const searchBtn = document.getElementById('search-btn');
            const searchInput = document.getElementById('location-search');
            const mapFrame = document.getElementById('windy-map');
            const updateMap = (location) => {
                const locations = {
                    'lagos': {lat: 6.5244, lon: 3.3792},
                    'ibadan': {lat: 7.3776, lon: 3.9470},
                    'abeokuta': {lat: 7.1577, lon: 3.3435},
                    'akure': {lat: 7.2526, lon: 5.1931}
                };
                const city = location.toLowerCase().trim();
                if (locations[city]) {
                    const {lat, lon} = locations[city];
                    mapFrame.src = `https://embed.windy.com/embed2.html?lat=${lat}&lon=${lon}&detailLat=${lat}&detailLon=${lon}&width=650&height=450&zoom=8&level=surface&overlay=rain&product=ecmwf&menu=&message=true&marker=&calendar=now&pressure=&type=map&location=coordinates&detail=&metricWind=km%2Fh&metricTemp=%C2%B0C&radarRange=-1`;
                } else {
                    alert("Sorry, only Lagos, Ibadan, Abeokuta, or Akure are supported in this beta, kindly input one of these locations and search for your desired location manually by interacting with the map. Thank you.");
                }
            };
            searchBtn.addEventListener('click', () => updateMap(searchInput.value));
            searchInput.addEventListener('keypress', (e) => { if (e.key === 'Enter') updateMap(searchInput.value); });


            // --- DYNAMIC CONTENT RENDERERS ---
            const renderCropCards = () => {
                const container = document.getElementById('crop-cards-container');
                container.innerHTML = ''; // Clear existing content
                for (const cropName in cropData) {
                    const data = cropData[cropName];
                    const card = document.createElement('div');
                    card.className = "bg-white p-6 rounded-lg shadow-md transition-transform duration-300 card-hover";
                    card.innerHTML = `
                        <h3 class="text-xl font-bold text-green-700 mb-3 flex items-center"><span class="text-2xl mr-3">${data.icon}</span> ${cropName}</h3>
                        <div class="mb-4"><h4 class="font-semibold text-gray-600">Planting:</h4><p class="text-gray-700">${data.planting}</p></div>
                        <div><h4 class="font-semibold text-gray-600">Irrigation:</h4><p class="text-gray-700">${data.irrigation}</p></div>`;
                    container.appendChild(card);
                }
            };

            const renderLocalPrices = () => {
                const tableBody = document.getElementById('prices-table-body');
                tableBody.innerHTML = '';
                marketPrices.forEach(item => {
                    const row = document.createElement('tr');
                    row.className = "border-b hover:bg-gray-50";
                    let trendColor = item.trend === 'Up' ? 'text-red-500' : (item.trend === 'Down' ? 'text-green-500' : 'text-gray-500');
                    let trendIcon = item.trend === 'Up' ? '▲' : (item.trend === 'Down' ? '▼' : '▬');
                    row.innerHTML = `
                        <td class="p-3 font-medium">${item.name}</td>
                        <td class="p-3">${item.price_per_100kg}</td>
                        <td class="p-3 ${trendColor} font-semibold">${trendIcon} ${item.trend}</td>`;
                    tableBody.appendChild(row);
                });
            };

            const renderValueAddedPrices = () => {
                const tableBody = document.getElementById('value-added-table-body');
                tableBody.innerHTML = '';
                valueAddedPrices.forEach(item => {
                    const row = document.createElement('tr');
                    row.className = "border-b hover:bg-gray-50";
                    row.innerHTML = `
                        <td class="p-3 font-medium">${item.product}</td>
                        <td class="p-3 text-gray-600">${item.source}</td>
                        <td class="p-3 font-semibold">${item.price}</td>
                        <td class="p-3 text-gray-600">${item.unit}</td>`;
                    tableBody.appendChild(row);
                });
            };

             const renderGlobalPrices = () => {
                const tableBody = document.getElementById('global-prices-table-body');
                tableBody.innerHTML = '';
                globalMarketPrices.forEach(item => {
                    const row = document.createElement('tr');
                    row.className = "border-b hover:bg-gray-50";
                    row.innerHTML = `
                        <td class="p-3 font-medium">${item.commodity}</td>
                        <td class="p-3 font-semibold">${item.price}</td>
                        <td class="p-3 text-sm text-gray-600">${item.unit}</td>`;
                    tableBody.appendChild(row);
                });
            };
            
            const renderOrganizations = () => {
                const container = document.getElementById('orgs-container');
                container.innerHTML = '';
                exportOrgs.forEach(org => {
                    const div = document.createElement('div');
                    div.className = "border-l-4 border-green-500 pl-4";
                    div.innerHTML = `<h4 class="font-bold text-gray-800">${org.name}</h4><p class="text-sm text-gray-600">${org.description}</p>`;
                    container.appendChild(div);
                });
            };

            const renderShippingTable = () => {
                const tableBody = document.getElementById('shipping-table-body');
                tableBody.innerHTML = '';
                shippingData.forEach(item => {
                    const row = document.createElement('tr');
                    row.className = "border-b hover:bg-gray-50";
                    row.innerHTML = `
                        <td class="p-3 font-medium">${item.port}</td>
                        <td class="p-3 text-gray-600">${item.region}</td>
                        <td class="p-3 font-semibold">${item.cost}</td>
                        <td class="p-3 text-gray-600">${item.time}</td>`;
                    tableBody.appendChild(row);
                });
            };

            // --- INITIALIZE ALL RENDERERS ON PAGE LOAD ---
            renderCropCards();
            renderLocalPrices();
            renderValueAddedPrices();
            renderGlobalPrices();
            renderOrganizations();
            renderShippingTable();
        });
    </script>
</body>
</html>